<!DOCTYPE html>
<html lang="zh" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>I&#39;m company - I&#39;m company</title>
  <meta name="author" content="Tomyli"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "I\x27m company",
    
    "url": "http:\/\/blog.imcompany.cn\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/blog.imcompany.cn\/"
  
  
  
  
}
</script>

<meta property="og:title" content="I&#39;m company" />
<meta property="og:image" content="http://blog.imcompany.cn/img/avatar-icon.png" />
<meta property="og:url" content="http://blog.imcompany.cn/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="I&#39;m company" />

  <meta name="twitter:title" content="I&#39;m company" />
  <meta name="twitter:image" content="http://blog.imcompany.cn/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@hougemeiga" />
  <meta name="twitter:creator" content="@hougemeiga" />
  <link href='http://blog.imcompany.cn/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.61.0" />
  <link rel="alternate" href="http://blog.imcompany.cn/index.xml" type="application/rss+xml" title="I&#39;m company"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="http://blog.imcompany.cn/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="http://blog.imcompany.cn/css/highlight.min.css" /><link rel="stylesheet" href="http://blog.imcompany.cn/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.imcompany.cn/">I&#39;m company</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="首页" href="/">首页</a>
            </li>
          
        
          
            <li>
              <a title="归档" href="/post/">归档</a>
            </li>
          
        
          
            <li>
              <a title="标签" href="/tags/">标签</a>
            </li>
          
        
          
            <li>
              <a title="目录" href="/categories/">目录</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="I&#39;m company" href="http://blog.imcompany.cn/">
            <img class="avatar-img" src="http://blog.imcompany.cn/img/avatar-icon.png" alt="I&#39;m company" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              
                <h1>I&#39;m company</h1>
              
              
                <hr class="small">
              
              
                
                  <span class="page-subheading">Everyone is a company.</span>
                
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
  <div role="main" class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        

        <div class="posts-list">
          
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/2020-arts-001/">
        <h2 class="post-title">2020-ARTS-打卡第一天</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;189&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        Algorithm 题目描述 给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。
Example 输入123-&gt;321 输入-123-&gt;-321 输入120-&gt;21
题目解答 import java.util.*; public class Solution1 { public int[] reverseNumber(int num) { int res = 0; while(num != 0) { int pod = num % 10; if(res &gt; Integer.MAX_VALUE / 10 || (res == Integer.MAX_VALUE / 10 &amp;&amp; pod &gt; 7)) { return 0; } if(res &lt; Integer.MIN_VALUE / 10 || (res == Integer.MIN_VALUE / 10 &amp;&amp; pod &lt; -8)) { return 0; } res = res * 10 + pod; num = num / 10; } return res; } } 此题主要考察对栈的使用，如果不使用其它辅助类，则要考虑Int的整数溢出问题。时间复杂度O(log(n))，空间复杂度为O(1)
        <a href="http://blog.imcompany.cn/post/2020-arts-001/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/arts/">arts</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/java/">java</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/leetcode/">leetcode</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/maven-deploy-issue/">
        <h2 class="post-title">Maven发布401问题排查</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;51&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        <h2 id="日志问题现象">日志问题现象</h2>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">Caused by: org.apache.maven.shared.transfer.artifact.deploy.ArtifactDeployerException: Failed to deploy artifacts: Could not transfer artifact com.aa.bb:client:jar:1.0.0-20191231.021137-1 from/to company::default (http://test.company.local/nexus/repository/maven-snapshots): Transfer failed for http://test.company.local/nexus/repository/maven-snapshots/com/aa/bb/client/1.0.0-SNAPSHOT/client-1.0.0-20191231.021137-1.jar 401 Unauthorized
</code></pre></div><p>根据提示，401未授权，表面来看就是发布的权限未认证</p>
<h2 id="排查步骤">排查步骤</h2>
<h3 id="settings文件是否配置了发布的用户名与密码-且用户有deploy的权限">settings文件是否配置了发布的用户名与密码，且用户有deploy的权限</h3>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;servers&gt;
  &lt;server&gt;
    &lt;id&gt;myid&lt;/id&gt;
    &lt;username&gt;myuser&lt;/username&gt;
    &lt;password&gt;mypasswd&lt;/password&gt;
  &lt;/server&gt;
&lt;/servers&gt;
</code></pre></div><h3 id="查看deploy插件的版本">查看deploy插件的版本</h3>
<ol>
<li>如果是2.X的版本,可以使用以下命令进行发布</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn -DaltDeploymentRepository<span class="o">=</span>company::default::http://test.compnay.local/nexus/repository/maven-snapshots clean package deploy
</code></pre></div><ol>
<li>如果是3.X的版本，则需要按3.X版本进行指定发布</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn deploy:deploy-file -Dfile<span class="o">=</span>xxx-1.0.0-SNAPSHOT.jar -Durl<span class="o">=</span>http://test.local/nexus/content/repositories/snapshots -DrepositoryId<span class="o">=</span>test-snapshot
</code></pre></div><h3 id="deploy-3-dot-0-dot-0-m1的发布bug">Deploy 3.0.0-M1的发布bug</h3>
<p>如果配置的deploy的插件为3.0.0-M1，则可参考<a href="https://support.sonatype.com/hc/en-us/articles/360010223594-maven-deploy-plugin-version-3-0-0-M1-deploy-fails-with-401-ReasonPhrase-Unauthorized">3.0.0-M1 401 bug</a> 进行修改，具体就是指定depoly版本为2.8，根据<a href="https://issues.apache.org/jira/browse/MDEPLOY-244?focusedCommentId=16648217&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16648217">插件作者的回复</a>感觉就是3.0.0-M1与altDeploymentRepository参数不能一起用</p>

        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/maven/">maven</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/maven-swim/">
        <h2 class="post-title">那些有用maven命令</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;33&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        <h2 id="查看当前系统的配置信息">查看当前系统的配置信息</h2>
<p>排查问题可以查看当前maven所依赖系统的所有变量(系统变量或者环境变量)信息</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn help:system
</code></pre></div><h2 id="查看当前有效的settings文件">查看当前有效的settings文件</h2>
<p>maven的配置文件分为全局配置与个人配置，全局配置在$M2_HOME/conf/下，个人配置一般在~/.m2/下，此时查看当前有效的settings配置可以使用</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn help:effective-settings
</code></pre></div><h2 id="查看settings配置的值">查看Settings配置的值</h2>
<p>以下命令可以查看settings文件中的settings-&gt;servers的配置</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn -q -Dexpression<span class="o">=</span>settings.servers -DforceStdout help:evaluate
</code></pre></div><p>使用<a href="https://maven.apache.org/plugins/maven-help-plugin/evaluate-mojo.html">help:evaluate</a>可以查看所有的配置信息</p>
<h2 id="指定发布到其它仓库">指定发布到其它仓库</h2>
<h3 id="deploy插件2-dot-x版本发布">Deploy插件2.X版本发布</h3>
<p>有时候在pom文件中指定了发布的仓库地址，但是又需要发布到另一个仓库，这时可以指定-DaltDeploymentRepository来实现</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mvn -DaltDeploymentRepository<span class="o">=</span>id::layout::url
</code></pre></div><p>具体说明参见<a href="https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html">deploy:deploy</a></p>
<h3 id="deploy插件3-dot-0-dot-0-m1版本发布">Deploy插件3.0.0-M1版本发布</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">/data/mvn/bin/mvn org.apache.maven.plugins:maven-deploy-plugin:3.0.0-M1:deploy-file -DgroupId<span class="o">=</span>com.qqreader -Dfile<span class="o">=</span>./target/<span class="k">$(</span>/data/mvn/bin/mvn -q -Dexpression<span class="o">=</span>project.build.finalName -DforceStdout help:evaluate<span class="k">)</span>.jar -Durl<span class="o">=</span>http://testurl.local/nexus/content/repositories/snapshots -DrepositoryId<span class="o">=</span>snapshot-id
</code></pre></div>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/commandline/">commandline</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/maven/">maven</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/java8-issue-review/">
        <h2 class="post-title">JAVA8问题处理回顾-持续更新</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;220&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        金额累加问题 使用Reduce进行累加操作，参考这里
List&lt;BigDecimal&gt; bdList = new ArrayList&lt;&gt;(); //populate list BigDecimal result = bdList.stream().reduce(BigDecimal.ZERO, BigDecimal::add); 查找集合的最后一个元素 JAVA8的Stream只提供了FindFirst功能，没有FindLast功能，可以使用Reduce来实现查找最后一个元素的效果
import java.util.*; import java.util.stream.*; public class GetLastEleFromCollection { public static void main(String[] args) { List&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(&#34;aaa&#34;); list.add(&#34;idddd&#34;); list.add(&#34;bbbb&#34;); String lastElement = list.stream() .reduce((first, second) -&gt; second) .orElse(null); System.out.println(lastElement); } } bbbb 比较两个时间是否是同一天 import java.time.*; import java.time.temporal.*; public class CompareDay { public static void main(String[] args) { final LocalDateTime now = LocalDateTime.
        <a href="http://blog.imcompany.cn/post/java8-issue-review/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/java/">java</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/java8/">java8</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/lambda/">lambda</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/apollo-client-custom/">
        <h2 class="post-title">Apollo Client自定义问题拾遗</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;70&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        <p><strong>由于公司很多服务要接入Apollo配置中心，并且对于项目的接入有网络要求，根据<a href="https://github.com/ctripcorp/apollo/wiki/Java%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597#1221-%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589apollo-meta-server%25E5%259C%25B0%25E5%259D%2580%25E5%25AE%259A%25E4%25BD%258D%25E9%2580%25BB%25E8%25BE%2591">官方说明</a>，需要自定义Client来完成</strong></p>
<h2 id="接入步骤">接入步骤</h2>
<h3 id="新建maven项目">新建maven项目</h3>
<p>在Idea中新建maven项目，基于quickstart构建</p>
<h3 id="增加项目依赖">增加项目依赖</h3>
<p>官方说明的建议在新的client中依赖Apollo官方的client，再根据业务进行扩展，所以maven依赖apollo-client，公司项目的网络访问需要通过L5来进行，所以还要依赖L5的jar，目前这个jar包没有maven坐标，只能以lib方式引入</p>
<h3 id="自定义metaserver">自定义MetaServer</h3>
<p>关键的部分，自定义满足公司网络条件的MetaServer，Apollo官网说明是实现MetaServerProvider且Order值小的Providor被使用，按照说明进行实现</p>
<h3 id="maven打包client">Maven打包Client</h3>
<p>执行
<strong>mvn clean install</strong>
进行打包，解压jar包发现就只有一个Providor的实现类，这样jar运行有问题。需要把新Client所有的依赖都打进jar包，在网上找了半天，需要在POM中增加maven的plugin的配置，如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;!-- 打包所有的maven依赖到jar包 --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2.1&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;artifactSet&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;junit:junit&lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/artifactSet&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;!-- 添加依赖的非maven jar包 --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;com.googlecode.addjars-maven-plugin&lt;/groupId&gt;
    &lt;artifactId&gt;addjars-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.5&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;add-jars&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;resources&gt;
                    &lt;resource&gt;
                        &lt;directory&gt;${basedir}/lib&lt;/directory&gt;
                    &lt;/resource&gt;
                &lt;/resources&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre></div><p>由于项目中使用了maven依赖与非maven依赖，所以上述的两个插件都要使用。增加了上面两个插件后再运行打包命令查看生成的jar就发现所有的依赖都在jar中了。</p>
<h3 id="项目中使用client">项目中使用Client</h3>
<p>选择一个项目在测试环境进行配置调试，自定义的Meta Server一直没有生效，所以查找<a href="https://github.com/ctripcorp/apollo/issues/1472">官方文档</a>，由于自定义Providor是通过<a href="https://blog.csdn.net/comkingfly/article/details/7645245?utm_source=tuicool&amp;utm_medium=referral">SPI</a>方式实现的，所以正确的实现方式是新建resource文件夹，指定MetaServerProvider的真正实现类的带包名类才可以，哎，找了我好久。</p>
<h3 id="后续操作">后续操作</h3>
<p>后续会把client上传到内部maven仓库，完善配置API，使业务方可以零配置来使用配置中心。</p>
<h3 id="总结">总结</h3>
<ul>
<li>Maven的打包机制还是不清晰，处理打包问题费了很多时间，要好好重新学习一下</li>
<li>Apollo的官方文档还需要再仔细阅读，有问题多查issue，因为可能有人已经遇到了</li>
<li>多读读源码，真正的体会大牛的软件设计思想</li>
</ul>

        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/apollo/">apollo</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/apollo-config-swim/">
        <h2 class="post-title">Apollo 配置中心畅游</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;108&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        目前市面上的开源产品 Disconf 2014年7月百度开源的配置管理中心，同样具备配置的管理能力，目前已经不维护了，最近的一次代码提交是两年前了。
Spring Cloud Config 2014年9月开源，Spring Cloud生态组件，与Spring Cloud体系无缝整合。
Apollo 2016年5月，携程框架部开源的配置管理中心，具备规范的权限、流程治理等特性。
Nacos 2018年6月，阿里开源的配置中心，可以做DNS和RPC的服务发现。
为什么选择Apollo 社区活跃 刚刚发布了1.4.0版本，Issue处理速度快
文档齐全 体验，部署，设计文档都齐全
重要的灰度发布 想发布一台机器试试水，可以！
开源协议友好 Apache 2 license
Apollo都有哪些重要功能 以下摘自官网说明
统一管理不同环境、不同集群的配置 配置修改实时生效（热发布） 版本发布管理 目前只支持对最近版本的恢复。https://github.com/ctripcorp/apollo/issues/1642
灰度发布 权限管理、发布审核、操作审计 编辑与发布是两个独立的操作。
客户端配置信息监控 提供Java和.Net原生客户端 提供开放平台API 这样可以通过其它方式来查看配置信息，平台API说明
使用方便的后台配置系统Portal 分布式部署相对较复杂，这是缺点 外部依赖少，目前依赖Mysql
Apollo的组成 Apollo长什么样?     Apollo整体设计 总体架构     代码结构     各模块概要介绍
Apollo Config Service 提供配置获取接口，服务对象为Apollo客户端
Apollo Admin Service 提供配置管理（修改、发布）接口，服务与Portal
Apollo Portal 提供WEB界面供用户管理配置
Apollo的重要设计 Admin Service与Config Service的通信方式 Apollo使用Mysql实现消息(ReleaseMessage)的处理，消息内容为AppId+Cluster+Namespace，具体的设计思想可以参考这里
        <a href="http://blog.imcompany.cn/post/apollo-config-swim/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/apollo/">apollo</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/arts-001/">
        <h2 class="post-title">ARTS-打卡第一天</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;129&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        Algorithm LeetCode 第一题
题目描述 给一个int数组，返回数组中两个数字相加的和是目标 数的下标。可以假设每个输入只有一个解决方案，并且不能使用同一个元素两次。
Example 给出nums = [2, 7, 11, 15], 目标数为9，则返回[0, 1]
题目解答 import java.util.*; public class Solution { public int[] twoSum(int[] nums, int target) { Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for(int i = 0; i &lt; nums.length; i ++) { int second = target - nums[i]; if(map.containsKey(second)) { return new int[]{map.get(second), i}; } map.put(nums[i], i); } return new int[]{}; } } 相比两次循环的方式，这种处理的时间复杂度为O(n), 空间复杂度也为O(n).
Review Google Cloud Production Guideline，本文主要是针对Google的Colud平台事故进行了线上发布的总结指导（检查列表）。详细如下：
        <a href="http://blog.imcompany.cn/post/arts-001/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/arts/">arts</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/centos7-install-issue-collect/">
        <h2 class="post-title">Centos7 install issue collect</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;85&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        由于工作需要，使用VMWare虚拟机安装了Centos7系统，遇到了很多问题，现在把这些问题记录下来，以备后用。
解决Centos7 yum could not retrieve mirrorlist错误 刚安装好的VM使用ip add查看局域网的ip没有结果，这个参考https://my.oschina.net/u/2456768/blog/3011881
配置静态ip 安装虚拟机就是模拟多个机器通讯的情况，但是目前的配置是机器ip是动态获取的，老是变，每次都得看ip，所以需要配置一下VMware来支持静态ip。主要机器上的配置信息为：
IPADDR=192.168.116.101 NETMASK=255.255.255.0 GATEWAY=192.168.116.2 DNS1=192.168.116.2 这个参考了https://blog.csdn.net/zhishengqianjun/article/details/77046796
Centos7安装后配置国内仓库源 由于国内访问centos的原始源慢，需要换成163的软件源，新安装的系统执行命令都提示not found，只能从物理下载源的配置再上传到VM中，但是首先得知道VM的ip地址，使用ifconfig是不可能了，查了一下可以使用
ip a 来查看VM的ip地址，这样配置源的的问题可以解决了，具体的配置源的方法参考https://blog.csdn.net/inslow/article/details/54177191
Centos7安装VMware Tools 想更好的让VM与物理机协同，则VMware Tools必须要安装，好久不用linux的我连挂载也忘的一干二净了。搜了一下，参考https://blog.csdn.net/WarnerWu/article/details/73718901 完成VMware Tools的安装。这样共享目录的功能就可以正常使用了
安装Jdk8 一句命令搞定：
yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel 安装mysql 使用yum安装mysql需要下载安装mysql的源，更新后就可以安装了，这个参考了https://www.linode.com/docs/databases/mysql/how-to-install-mysql-on-centos-7/
修改mysql的root密码 安装完mysql后登录找不到密码了，其实在使用yum安装时会mysql会自动生成一个随机密码，这个密码可以在安装的日志中找到。此方法参考了https://blog.csdn.net/kuluzs/article/details/51924086
开放3306端口 为了方便mysql工具进行操作，需要开放3306端口。Centos7的防火墙还改了。具体就3个命令：
systemctl start firewalld firewall-cmd --zone=public --add-port=3306/tcp --permanent firewall-cmd --reload 这个参考了https://www.jianshu.com/p/225a853350d9
安装oh-my-bash 由于一般服务器都自带bash为默认的shell，但是操作起来着实不方便，安装oh-my-bash可以对shell进行一些增强。https://github.com/ohmybash/oh-my-bash
Centos自动登录 安装后每次启动VM都要输入密码，这个对于自己测试很麻烦，要使Centos能登录后自动登录需要做以下操作：
  移除原来的getty@tty1.service软链接
rm /etc/systemd/system/getty.target.wants/getty@tty1.service   拷贝getty@.service file 并且命名为 getty@tty1.service
cp /lib/systemd/system/getty@.service /etc/systemd/system/getty@tty1.service   编辑新拷贝的getty@tty1.
        <a href="http://blog.imcompany.cn/post/centos7-install-issue-collect/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/linux/">linux</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/centos/">centos</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/na-xie-gao-xiao-de-chromecha-jian/">
        <h2 class="post-title">那些高效的Chrome插件</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;90&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        1Password extension 密码管理工具1Password的Chrome插件。插件地址
Auto Refresh 自动刷新网页的插件，支持设置刷新时间间隔。插件地址
Awesome Autocomplete for GitHub 在浏览器中为Github增强搜索功能。插件地址
BetterTweetDeck TweetDeck功能增强，如支持表情，只看某人的tweets，插件地址
Chrono下载管理器 功能全面的chrome下载管理器，满足你的一切需求。插件地址
Clutter Free - Prevent duplicate tabs 防止打开相同的tab页面。插件地址
Dualsub 让Youtube同时显示两种语言的字幕。插件地址
GitHub Hovercard 鼠标Hover时更全面显示Github上个人与仓库的信息。插件地址
Insight.io for Github 为Github添加类似IDE的功能，高效的代码浏览工具。插件地址
JSON-handle JSON数据处理插件。插件地址
JSON Viewer Awesome JSON数据美化，漂亮的不行不行的。插件地址
Org Capture Org Capture的Chrome插件，支持Capture网页链接与选中文字，配合Emacs使用。插件地址
MAMA-HD 解决在看视频网站时Mac发热的问题。插件地址
Proxy SwitchyOmega 网页代理切换，支持定义多种模式。插件地址
Sourcegraph 在线浏览Github的源码，支持一些语言的语义跳转。插件地址
Surfingkeys 严重推荐，VIM键盘模拟，自定义程度非常高。插件地址
Tampermonkey 用户自定义脚本管理器。插件地址
YAAW for Chrome 使用YAAW处理Chrome的下载请求。插件地址
二管家 Chrome扩展管理器，快速开启、禁用，模式快速切换，更强大的是可以自定义插件的启用规则，这个很赞。插件地址
二箱 多个网站的以图搜图插件，能用图说的咱决不打字。插件地址
沙拉查词-聚合词典划词翻译 更人性化的划词扩展。插件地址
简悦 - SimpRead 沉浸式阅读首选，支持大多数的网站。插件地址
Clearly 更好的英文网页浏览选择，带文字朗读功能。插件地址
Read Aloud 朗读英文文章的更好选择，它只会朗读标题与正文。可以选择朗读语间，音调，速度。插件地址
        <a href="http://blog.imcompany.cn/post/na-xie-gao-xiao-de-chromecha-jian/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/chrome/">chrome</a>&nbsp;
        
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="http://blog.imcompany.cn/post/na-xie-ti-gao-xiao-lu-de-ming-ling-xing-gong-ju/">
        <h2 class="post-title">那些提高效率的命令行工具</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;
  
    &nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;108&nbsp;
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;tomyli
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        Brew Mac软件包管理工具。用命令行命令来安装软件，仓库软件丰富。地址
bat bat? No，高端cat，不费眼。带颜色显示，支持git状态，自动分页。地址
cowsay 奶牛说： 地址
coreutils 使用Rust重写的gnuutils。地址
direnv 环境变量切换，可以指定在进入某一文件夹后的操作，比如输出一条欢迎语句，在退出文件夹后则卸载变量（操作），它的[stdlib](https://github.com/direnv/direnv/blob/master/stdlib.sh
)内置了一些功能来处理环境。 地址
exa ls、tree的替代者，支持多种显示方式，支持按指定条件排序显示。地址
duti mac默认软件打开程序配置。再也不用一个手动的点击设置了，可以脚本化。地址
riggrep 强大的find，查询速度更快，支持匹配结果的字符替换，支持定义输出颜色。地址
fortune 英文名言集合，可以使用fortunes进行扩展，对中文用户更友好。地址
fzf 强大的交互式搜索，大大提高效率，官网提供了很多实用的操作目录与git的命令。地址
goku 改键神器Karabiner的配置管理器，更健康，更人性化。地址
htop 交互式的top信息显示，支持配色。地址
imgcat 命令行看图片。可以控制显示的高度、宽度。地址
jq json内容操作显示。支持分离、过滤、转换元素，判断JSON元素节点是否存在等功能，内置了很多方便的函数。 地址
jenv JDK版本管理命令行工具，支持全局、当前目录、当前shell的jdk版本指定。还可以指定Java虚拟机指定的JVM参数。支持插件的启用与禁用。地址
lnav log file navigator，增加的日志查看，可以根据日志级别显示不同颜色的日志信息。支持分页显示。地址
lolcat 命令、文件内容多彩输出。地址
m-cli Mac的瑞士军刀，支持各种mac组件(Dock，蓝牙，WIFI，Finder)的操作。地址
mackup Mac应用配置同步，支持多种存储方式。支持自定义应用的同步配置。主要命令为backup，restore，uninstall。地址
mas 命令行安装apple store应用。地址
mycli 命令行中的mysql客户端。地址
ncdu 增强版本的du，机器空间使用查询，支持扫描结果导出与导入，支持多种排序方式。地址
Ranger 命令行下的文件管理，强大到没朋友。地址
pandoc 文档转换，支持非常多的的格式转换。地址
pyenv pythne版本管理工具。地址
pyenv-virtualenv pythne虚拟环境管理，管理pyenv配置的环境。地址
prettyping 增强的ping，图形化显示，可以轻松的看出ping的地址的网络状况。地址
rtv 命令行中浏览reddit。地址
s-search 命令行下进行web搜索。地址
tmux 终端多会话管理器。地址
tldr 命令快速查询。简单的man。地址
        <a href="http://blog.imcompany.cn/post/na-xie-ti-gao-xiao-lu-de-ming-ling-xing-gong-ju/" class="post-read-more">[]</a>
        
    </div>

    
    <div class="blog-tags">
        
        <a href="http://blog.imcompany.cn//tags/commandline/">commandline</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/bash/">bash</a>&nbsp;
        
        <a href="http://blog.imcompany.cn//tags/zsh/">zsh</a>&nbsp;
        
    </div>
    

</article>
          
        </div>

        
          <ul class="pager main-pager">
            
            
              <li class="next">
                <a href="http://blog.imcompany.cn/page/2/"> &rarr;</a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>

      
    <div class="page-meta">
  
  
  
    
  
</div>


  
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:peng051410@126.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/peng051410" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://gitlab.com/peng051410" title="GitLab">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/hougemeiga" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://reddit.com/u/tomyli1314" title="Reddit">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/%e5%bf%97%e9%b9%8f-%e6%9d%8e-9138b5110/" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://weibo.com/2039256763" title="Weibo">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-weibo fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Tomyli
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="http://blog.imcompany.cn/">I&#39;m company</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="http://blog.imcompany.cn/js/main.js"></script>
<script src="http://blog.imcompany.cn/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="http://blog.imcompany.cn/js/load-photoswipe.js"></script>









    
  </body>
</html>

