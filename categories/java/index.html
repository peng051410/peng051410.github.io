<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java | I'm company</title><meta name=keywords content><meta name=description content="Everyone is a company."><meta name=author content="Me"><link rel=canonical href=http://blog.imcompany.cn/categories/java/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=http://blog.imcompany.cn/categories/java/index.xml title=rss><link rel=alternate hreflang=en href=http://blog.imcompany.cn/categories/java/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="http://blog.imcompany.cn/categories/java/"><meta property="og:site_name" content="I'm company"><meta property="og:title" content="Java"><meta property="og:description" content="Everyone is a company."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Java"><meta name=twitter:description content="Everyone is a company."></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=http://blog.imcompany.cn/ accesskey=h title="Home (Alt + H)"><img src=http://blog.imcompany.cn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://blog.imcompany.cn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://blog.imcompany.cn/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://blog.imcompany.cn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://github.com/peng051410/today_i_learn title=Til><span>Til</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=http://blog.imcompany.cn/>Home</a>&nbsp;Â»&nbsp;<a href=http://blog.imcompany.cn/categories/>Categories</a></div><h1>Java
<a href=/categories/java/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>JAVAä¸­å¦‚ä½•åˆ¤æ–­å¯¹è±¡ä¸ç±»çš„å…³ç³»ä¹‹-instanceOf, Class.isInstance, Class.isAssignableFrom</h2></header><div class=entry-content><p>å‰è¨€ åœ¨å¼€å‘ä¸­ï¼Œå¸¸å¸¸ä¼šç¢°åˆ°æ£€æŸ¥JAVAå¯¹è±¡æ˜¯ä¸æ˜¯æŒ‡å®šç±»å‹çš„æƒ…å†µï¼Œåœ¨JAVAä¸­æä¾›äº†ä»¥ä¸‹å‡ ç§æ–¹æ³•å®ç°æ­¤ç±»éœ€æ±‚:
instanceOf Class.isInstance() Class.isAssignbleFrom() ä»Šå¤©å¯¹æ­¤ä¸‰ç§å®ç°è¿›è¡Œå…·ä½“å­¦ä¹ ï¼Œä»¥åŠ æ·±ç†è§£å¹¶æ›´å¥½çš„ä½¿ç”¨
å‡†å¤‡å·¥ä½œ å…ˆåˆ›å»ºä¸€ä¸ªåä¸º Shape çš„æ¥å£ï¼Œä¸€ä¸ªå®ç°äº† Shape æ¥å£çš„ç±» Triangle , å†å®šä¹‰ä¸€ä¸ªç»§æ‰¿ Triangle ç±»çš„ç±» IsoscelesTriangle
public interface Shape { } public class Triangle implements Shape { } public class IsoscelesTriangle extends Triangle { } ä»¥ä¸Šä¸‰ä¸ªç±»çš„ç±»å›¾å…³ç³»å¦‚ä¸‹ instanceOf instanceOf æ˜¯JAVAä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºåˆ¤æ–­ å®ä¾‹å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹çš„å­ç±»å‹ ï¼Œå¸¸ç”¨äºç±»å‹è½¬æ¢(cast)ä¹‹å‰è¿›è¡Œåˆ¤æ–­ï¼Œæ“ä½œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªç±»å‹
Shape shape = new Triangle(); Triangle triangle = new Triangle(); IsoscelesTriangle isoscelesTriangle = new IsoscelesTriangle(); Shape nonspecificShape = null; assertTrue(shape instanceof Shape); assertTrue(triangle instanceof Shape); assertTrue(isoscelesTriangle instanceof Shape); assertFalse(nonspecificShape instanceof Shape); assertTrue(shape instanceof Triangle); assertTrue(triangle instanceof Triangle); assertTrue(isoscelesTriangle instanceof Triangle); assertFalse(nonspecificShape instanceof Triangle); assertFalse(shape instanceof IsoscelesTriangle); assertFalse(triangle instanceof IsoscelesTriangle); assertTrue(isoscelesTriangle instanceof IsoscelesTriangle); assertFalse(nonspecificShape instanceof IsoscelesTriangle); ä¸Šé¢ä¾‹å­æµ‹è¯• instanceOf å·¦ä¾§å¯¹è±¡æ˜¯å¦æ˜¯å³ä¾§ç±»å‹çš„å®ä¾‹ç±»å‹
...</p></div><footer class=entry-footer><span title='Created: 2022-12-12 19:14:00 +0800 CST'>2022-12-12</span>&nbsp;Â·&nbsp;<span title='Modified: 2022-12-14 15:18:59 +0800 CST'> (ğŸŒŸUpdated: 2022-12-14)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>249 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to JAVAä¸­å¦‚ä½•åˆ¤æ–­å¯¹è±¡ä¸ç±»çš„å…³ç³»ä¹‹-instanceOf, Class.isInstance, Class.isAssignableFrom" href=http://blog.imcompany.cn/post/java-check-object-class/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springwebfluxæºç å­¦ä¹ -æœåŠ¡å¯åŠ¨æµç¨‹</h2></header><div class=entry-content><p>å­¦ä¹ ç›®æ ‡ ç†è§£WebFluxæ ¸å¿ƒç»„ä»¶HttpHandlerã€WebHandlerçš„åˆ›å»ºè¿‡ç¨‹ ç†è§£DispatcherHandlerå¦‚ä½•æ˜ å°„è¯·æ±‚urlåŠå‚æ•°çš„è¿‡ç¨‹ ç†è§£NettyæœåŠ¡çš„ä¸»è¦å¯åŠ¨èŠ‚ç‚¹ æ­¤æ¬¡å­¦ä¹ çš„Spring bootç‰ˆæœ¬ä¸º2.6.6ï¼Œå¯¹åº”çš„Spring webfluxç‰ˆæœ¬ä¸º5.3.18
å…¥å£ Springbootå·¥ç¨‹å…¥å£æ–¹æ³•ä¸º SpringApplication.run() ï¼Œä»æ­¤æ–¹æ³•å¼€å§‹è¿›è¡Œåˆ†æã€‚
public static void main(String[] args) { SpringApplication.run(Main.class, args); } å†³å®šå¯åŠ¨çš„webåº”ç”¨ç±»å‹ æ•´ä¸ªæœåŠ¡çš„webåº”ç”¨ç±»å‹æ˜¯åœ¨æ„é€  SpringApplication ç±»æ—¶è¿›è¡Œç¡®å®šçš„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š
this.webApplicationType = WebApplicationType.deduceFromClasspath(); åˆ¤æ–­åº”ç”¨ç±»å‹çš„é€»è¾‘ org.springframework.web.reactive.DispatcherHandlerå­˜åœ¨ org.springframework.web.servlet.DispatcherServletä¸å­˜åœ¨ org.glassfish.jersey.servlet.ServletContainerä¸å­˜åœ¨ å³ç¡®è®¤webApplicationTypeä¸º Reactive
if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null) && !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) { return WebApplicationType.REACTIVE; } åˆ›å»ºå…·ä½“çš„ApplicationContext æ ¹æ®webApplicationType(Reactive)ç¡®å®šåˆ›å»ºçš„ApplicationContextä¸ºAnnotationConfigReactiveWebServerApplicationContextï¼Œæ­¤Contextæ”¯æŒ @Component å’Œ JSR-330è§„èŒƒä¸­ @Inject å½¢å¼çš„ä¾èµ–æ³¨è§£
SpringAplication.createApplicationContext() switch (webApplicationType) { case SERVLET: return new AnnotationConfigServletWebServerApplicationContext(); case REACTIVE: return new AnnotationConfigReactiveWebServerApplicationContext(); default: return new AnnotationConfigApplicationContext(); } æœ€ä¸»è¦çš„ApplicationContext.refresh()æ–¹æ³• refreshçš„Refreshé˜¶æ®µ åˆ·æ–°æ“ä½œæ˜¯åœ¨ AbstractApplicationContext ç±»çš„refreshæ–¹æ³•ä¸­è¿›è¡Œï¼Œåœ¨è°ƒç”¨invokeBeanFactoryPostProcessorsæ–¹æ³•æ—¶ä¼šæœ‰å¯¹controlleræ³¨è§£çš„æ‰«æä¸å¤„ç†
...</p></div><footer class=entry-footer><span title='Created: 2022-05-24 17:37:00 +0800 CST'>2022-05-24</span>&nbsp;Â·&nbsp;<span title='Modified: 2022-05-30 20:10:14 +0800 CST'> (ğŸŒŸUpdated: 2022-05-30)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>351 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to Springwebfluxæºç å­¦ä¹ -æœåŠ¡å¯åŠ¨æµç¨‹" href=http://blog.imcompany.cn/post/springwebflux-start/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®°ä¸€æ¬¡SpringWebfluxæ¡†æ¶ä¸‹å †å¤–OOMæ’æŸ¥ç»å†</h2></header><div class=entry-content><p>ç—‡çŠ¶ ç”Ÿäº§ç¯å¢ƒä¸šåŠ¡é¡µé¢æ‰“ä¸å¼€ï¼Œçœ‹é”™è¯¯æ—¥å¿—æ˜¯ OutOfDirectMemoryError (OOM)äº†ï¼Œè¯¦æƒ…æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š
2022-03-21 06:00:00.541 [,] [tafprx-asyrecv_9] ERROR r.c.p.Operators - [error,314] - Operator called default onErrorDropped java.lang.OutOfMemoryError: Direct buffer memory at java.base/java.nio.Bits.reserveMemory(Bits.java:175) at java.base/java.nio.DirectByteBuffer.&lt;init>(DirectByteBuffer.java:118) at java.base/java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:317) at io.netty.buffer.PoolArena$DirectArena.allocateDirect(PoolArena.java:632) at io.netty.buffer.PoolArena$DirectArena.newChunk(PoolArena.java:607) at io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:202) at io.netty.buffer.PoolArena.tcacheAllocateSmall(PoolArena.java:172) at io.netty.buffer.PoolArena.allocate(PoolArena.java:134) at io.netty.buffer.PoolArena.allocate(PoolArena.java:126) at io.netty.buffer.PooledByteBufAllocator.newDirectBuffer(PooledByteBufAllocator.java:395) at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:187) at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:178) at io.netty.buffer.AbstractByteBufAllocator.buffer(AbstractByteBufAllocator.java:115) at org.springframework.core.io.buffer.NettyDataBufferFactory.allocateBuffer(NettyDataBufferFactory.java:71) at org.springframework.core.io.buffer.NettyDataBufferFactory.allocateBuffer(NettyDataBufferFactory.java:39) at org.springframework.http.codec.json.AbstractJackson2Encoder.encodeValue(AbstractJackson2Encoder.java:236) at org.springframework.http.codec.json.AbstractJackson2Encoder.lambda$encode$0(AbstractJackson2Encoder.java:150) at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113) at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815) at reactor.core.publisher.MonoCompletionStage.lambda$subscribe$0(MonoCompletionStage.java:82) at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883) at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251) at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:143) at reactor.core.publisher.MonoCompletionStage.subscribe(MonoCompletionStage.java:57) at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157) at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815) at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249) at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:284) at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187) at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815) at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151) æ ¹æ®æŠ¥é”™çš„å †æ ˆï¼Œæ‰¾åˆ° AbstractJackson2Encoder:236 è¡Œï¼Œè°ƒè¯•å‘ç°æ¡†æ¶ä½¿ç”¨çš„bufferåœ¨æœ€åéƒ½è¿›è¡Œäº†é‡Šæ”¾ï¼Œçœ‹ç€æ²¡é—®é¢˜ã€‚
...</p></div><footer class=entry-footer><span title='Created: 2022-03-31 20:12:23 +0800 CST'>2022-03-31</span>&nbsp;Â·&nbsp;<span title='Modified: 2022-04-13 18:44:50 +0800 CST'> (ğŸŒŸUpdated: 2022-04-13)</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>615 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®°ä¸€æ¬¡SpringWebfluxæ¡†æ¶ä¸‹å †å¤–OOMæ’æŸ¥ç»å†" href=http://blog.imcompany.cn/post/springwebflux-leak-bug/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®©å¥½ä»£ç ç”Ÿç”Ÿä¸æ¯-æ›´å¥½çš„ä½¿ç”¨String</h2></header><div class=entry-content><p>å¼€å‘ä¸­å¸¸ç”¨çš„Stringæ“ä½œ å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„æ“ä½œæœ‰ï¼š
æ ¼å¼åŒ–/æ—¥å¿—æ ¼å¼åŒ– å­—ç¬¦ä¸²åˆ¤æ–­ å­—ç¬¦ä¸²å¤„ç†ï¼Œå¸¸è§çš„å¦‚å¤„ç†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­—ç¬¦ String.format String.format()æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–çš„æ–¹æ³•ï¼Œä½¿ç”¨%ä¸ºå‰ç¼€æ¥è¡¨ç¤ºè¦æ ¼å¼åŒ–çš„å†…å®¹å ä½ï¼Œä¸€èˆ¬çš„ä½¿ç”¨æ–¹æ³•ä¸ºï¼š
String.format("test result is %s", "success"); ä½†æ˜¯å½“è¦æ ¼å¼åŒ–çš„å ä½ç¬¦ä¸å‚æ•°ä¸ªæ•°ä¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ
å ä½ç¬¦ä¸ªæ•°ä¸å‚æ•°ä¸ªæ•°ç›¸åŒ å¦‚ä¸Šä»£ç ï¼Œå¯ä»¥æ­£å¸¸è¿›è¡Œè¾“å‡º: test result is success
å ä½ç¬¦ä¸ªæ•°å°‘äºå‚æ•°ä¸ªæ•° String.format("test result is %s", "success", "other"); å¯ä»¥æ­£å¸¸æ‰“å°ï¼Œè¾“å‡ºç»“æœä¸º: test result is success
å ä½ç¬¦ä¸ªæ•°å¤šäºå‚æ•°ä¸ªæ•° String.format("test result is %s %s %s", "success", "other"); æŠ›å‡ºäº†å¼‚å¸¸java.util.MissingFormatArgumentException: Format specifier â€˜%sâ€™
é—®é¢˜æ€»ç»“ ä¸ºä»€ä¹ˆå ä½ç¬¦æ•°å°‘äºå‚æ•°ä¸ªæ•°å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œè€Œå¤šäºå‚æ•°ä¸ªæ•°å´æŠ¥äº†å¼‚å¸¸ï¼Ÿçœ‹JAVADOCå‘ç°ï¼Œå¦‚æœå ä½ç¬¦ä¸ªæ•°å°‘äºå‚æ•°ä¸ªæ•°ï¼Œåˆ™å¤šä½™çš„å‚æ•°è¢«å¿½ç•¥ï¼Œå¦‚æœå¤šäºå‚æ•°ä¸ªæ•°ï¼Œåˆ™åœ¨è¿›è¡Œè§£ææ—¶ä¼šåˆ¤æ–­å¾…å¤„ç†å ä½ç¬¦ä½ç½®ä¸å‚æ•°ä¸ªæ•°ï¼Œä¸»è¦ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š
if (args != null && lasto > args.length - 1) throw new MissingFormatArgumentException(fs.toString()); æ‰€ä»¥åœ¨ä½¿ç”¨String.formatæ–¹æ³• åˆ‡è®° è¦å‚æ•°ä¸ªæ•°å¤šäºå¾…è§£æå ä½ç¬¦çš„ä¸ªæ•°ï¼Œè¿™ç§é—®é¢˜å¸¸å› ä¸ºCopyæ“ä½œåï¼Œå¤„ç†äº†éƒ¨åˆ†å‚æ•°è€Œå¿˜è®°å¯¹åº”å¤„ç†å ä½ç¬¦
æ›¿æ¢æ–¹æ¡ˆ
ç›®å‰çœ‹åˆ°å¾ˆå¤šçš„è€ä»£ç æ‰“å°æ—¥å¿—æ—¶å¤§éƒ½ä½¿ç”¨String.format()ï¼Œå¯ä»¥æ”¹æˆslf4jçš„{} è¿˜å¯ä»¥ä½¿ç”¨Apache common utilsä¸­çš„StringUtils.joinWith()æˆ–è€…Google guavaçš„Joinerè¿æ¥å™¨ Apache commons utils-StringUtils åœ¨StringUtilsä¸­æœ‰ä¸€ä¸ªisNumericæ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯æ•°å­—ï¼Œé‚£ä¸‹é¢çš„ä»£ç ä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿ
...</p></div><footer class=entry-footer><span title='Created: 2021-08-23 14:04:09 +0800 CST'>2021-08-23</span>&nbsp;Â·&nbsp;<span title='Modified: 2021-09-06 11:25:02 +0800 CST'> (ğŸŒŸUpdated: 2021-09-06)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>221 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®©å¥½ä»£ç ç”Ÿç”Ÿä¸æ¯-æ›´å¥½çš„ä½¿ç”¨String" href=http://blog.imcompany.cn/post/best-code-string/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®©å¥½ä»£ç ç”Ÿç”Ÿä¸æ¯-æ›´å¥½çš„å¯¹å¾…NULL</h2></header><div class=entry-content><p>ä»€ä¹ˆæ ·çš„ä»£ç æ˜¯å¥½ä»£ç  æ˜“è¯»çš„ä»£ç ï¼Œè¡Œäº‘æµæ°´çš„ä»£ç 
JAVAä¸­çš„NULLå¤„ç† ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Javaä»£ç ä¸­æ€»æ˜¯å°‘ä¸äº†ä¸€å †çš„åˆ¤nullé€»è¾‘ï¼Œåœ¨ä»£ç bugä¸­ï¼ŒNullPointerExceptionå‡ºé•œç‡ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œå°¤å…¶æ˜¯ç°åœ¨çš„ä¸»æµåˆ†å¸ƒå¼æ¶æ„ï¼Œä¸€ä¸ªwebæ¥å£è¦è°ƒç”¨åç«¯çš„Nä¸ªRPCæœåŠ¡æ¥å®ç°åŠŸèƒ½ï¼ŒåŸºäºé˜²å¾¡ç¼–ç¨‹çš„æ€æƒ³ï¼Œåˆ¤nullå°±æ›´é‡è¦äº†
åœ¨å¤„ç†NULLæ—¶æ€ä¹ˆåšæ›´å¥½ IDE æ—¢ç„¶æ— æ³•é¿å…nullï¼ŒIDEå°±ç»™ç¨‹åºå‘˜å¢åŠ äº†å¯ä»¥å¿«é€Ÿåˆ¤æ–­ç©ºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨IDEAä¸­ï¼Œå¯ä»¥ä½¿ç”¨PostfixåŠŸèƒ½ï¼Œåœ¨å¯¹è±¡ä¸Šoä½¿ç”¨.nnæ¥å¿«é€Ÿè¾“å…¥if(o != null) {}
JAVAåŸºç¡€ç±»åº“ è¿‘æœŸçš„JDKç‰ˆæœ¬ä¹Ÿé’ˆå¯¹nullåˆ¤æ–­å¢åŠ äº†ä¸€äº›å®ç”¨çš„æ–¹æ³•
Objectsç±» JAVA8åœ¨Objectså·¥å…·æä¾›äº†isNull()å’ŒnonNull()æ–¹æ³•ï¼ŒJAVA9åˆå¢åŠ äº†requireNonNullElse()å’ŒrequireNonNullElseGet()æ¥ç»™å¾…å¤„ç†å¯¹è±¡å¢åŠ è®¾ç½®é»˜è®¤å€¼çš„æ–¹æ³•
çŸ¥åä¸‰æ–¹åº“ Apache common utilsä¸­æä¾›äº†éå¸¸å¤šçš„åˆ¤ç©ºå·¥å…·ç±»ï¼Œå¦‚é’ˆå¯¹Stringæ“ä½œçš„StringUtilsç±»å’Œé’ˆå¯¹é›†åˆæ“ä½œçš„CollectionUtilsã€MapUtilsã€ListUtilsã€SetUtilsï¼Œè¿™å‡ ä¸ªç±»éƒ½æœ‰ä¸€äº›å…¸å‹çš„æ–¹æ³•æ¥è¿›è¡Œåˆ¤ç©ºå¤„ç†ï¼Œé€šç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š
StringUtils isEmpty()/isNotEmpty()
åˆ¤æ–­Stringæ˜¯å¦ä¸ºç©º/ä¸ç©º
isBlank()/isNoneBlank()
åˆ¤æ–­Stringæ˜¯å¦ä¸ºç©º/ä¸ç©ºï¼Œè¿™ç±»æ–¹æ³•è¿˜ä¼šåˆ¤æ–­å®é™…å€¼æ˜¯å¦ä¸ºç©ºä¸²
defaultString()
æ­¤æ–¹æ³•å…è®¸åœ¨Stringä¸ºnullæ—¶ä¸ºè¿”å›ç©ºä¸²
defaultIfBlank()/defaultIfEmpty()
æ­¤æ–¹æ³•å…è®¸åœ¨Stringä¸ºç©ºä¸²æˆ–nullæ—¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼
é›†åˆç±»Utils isEmpty()/isNotEmpty()
åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º/ä¸ç©º
emptyIfNull()
è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ–¹æ³•ï¼Œå½“ä¼ å…¥å¯¹è±¡ä¸ºç©ºæ—¶åˆ™è¿”å›è®¾ç½®çš„é»˜è®¤å¯¹è±¡ï¼Œå¯ä»¥å¾ˆå¥½çš„æ ¹æ²»ifå¤„ç†nullçš„é—®é¢˜ï¼Œä¸‹é¢ä¸¤æ®µä»£ç æ¼”ç¤ºä¸€ä¸‹
æ­£å¸¸æƒ…å†µä¸‹æœ‰ifåˆ¤æ–­ List&lt;Object> values = rpcClient.getFromRpcList(); if(CollectionUtils.isNotEmpty(values)) { return values .forEach(System.out::println); } ä½¿ç”¨emptyIfNullæ–¹æ³• return CollectionUtils.emptyIfNull(rpcClient.getFromRpcList()) .forEach(System.out::println); è¿™æ ·ä¿è¯äº†ä»£ç ç¼–å†™çš„è¿è´¯æ€§ï¼Œçˆ½ï¼
æ­¤æ–¹æ³•åœ¨ListUtisã€MapUtilsã€SetUtilsä¸­ä¹Ÿæœ‰æä¾›
defaultIfNull()
æ­¤æ–¹æ³•å…è®¸åœ¨é›†åˆä¸ºnullæ—¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¹Ÿæ˜¯å¯ä»¥é“¾å¼æ“ä½œ
ä¼˜ç§€çš„Coder åœ¨ç¼–å†™é€šç”¨æ–¹æ³•æ—¶ï¼Œå¯¹äºæœ‰nullè¿”å›çš„æƒ…å†µå¯ä»¥ä½¿ç”¨è¿”å›é»˜è®¤å€¼æ¥ä»£æ›¿null
ä¸è¿”å›ç©ºï¼Œä»¥ç©ºå¯¹è±¡æ¥ä»£æ›¿ æ¯”å¦‚è¿”å›ä¸€ä¸ªnew Object()
...</p></div><footer class=entry-footer><span title='Created: 2021-07-17 16:04:09 +0800 CST'>2021-07-17</span>&nbsp;Â·&nbsp;<span title='Modified: 2021-07-23 10:12:35 +0800 CST'> (ğŸŒŸUpdated: 2021-07-23)</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>60 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®©å¥½ä»£ç ç”Ÿç”Ÿä¸æ¯-æ›´å¥½çš„å¯¹å¾…NULL" href=http://blog.imcompany.cn/post/best-code1/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>JAVA8é—®é¢˜å¤„ç†å›é¡¾-æŒç»­æ›´æ–°</h2></header><div class=entry-content><p>é‡‘é¢ç´¯åŠ é—®é¢˜ ä½¿ç”¨Reduceè¿›è¡Œç´¯åŠ æ“ä½œï¼Œå‚è€ƒè¿™é‡Œ
List&lt;BigDecimal> bdList = new ArrayList&lt;>(); //populate list BigDecimal result = bdList.stream().reduce(BigDecimal.ZERO, BigDecimal::add); æŸ¥æ‰¾é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´  JAVA8çš„Streamåªæä¾›äº†FindFirståŠŸèƒ½ï¼Œæ²¡æœ‰FindLaståŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨Reduceæ¥å®ç°æŸ¥æ‰¾æœ€åä¸€ä¸ªå…ƒç´ çš„æ•ˆæœ
import java.util.*; import java.util.stream.*; public class GetLastEleFromCollection { public static void main(String[] args) { List&lt;String> list = new ArrayList&lt;>(); list.add("aaa"); list.add("idddd"); list.add("bbbb"); String lastElement = list.stream() .reduce((first, second) -> second) .orElse(null); System.out.println(lastElement); } } bbbb æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´æ˜¯å¦æ˜¯åŒä¸€å¤© import java.time.*; import java.time.temporal.*; public class CompareDay { public static void main(String[] args) { final LocalDateTime now = LocalDateTime.now(); final LocalDateTime localDateTime = LocalDateTime.of(2019, 9, 29, 0, 0, 0); System.out.println(localDateTime.truncatedTo(ChronoUnit.DAYS).isEqual(now.truncatedTo(ChronoUnit.DAYS))); } } true å®ç°ä¸Pythonçš„zipå‡½æ•°åŠŸèƒ½ import java.util.*; import java.util.function.*; public class Zip { public static void main(String[] args) { List&lt;List&lt;Integer>> result = handle(Arrays.asList(1, 2, 3), Arrays.asList(4, 5, 6), (i, j) -> Arrays.asList(i, j)); System.out.println(result); } public static &lt;T, U, R> List&lt;R> handle(List&lt;T> list, List&lt;U> list1, BiFunction&lt;T, U, R> biFunction) { List&lt;R> result = new ArrayList&lt;>(); for(int i = 0; i &lt; list.size(); i ++) { result.add(biFunction.apply(list.get(i), list1.get(i))); } return result; } } [[1 (\, 4)] (\, [2 (\, 5)]) (\, [3 (\, 6)])] å¤šä¸ªPredicateé“¾ import java.util.*; import java.util.stream.*; import java.util.function.*; public class MorePredicate { public static void main(String[] args) { List&lt;Integer> list = Arrays.asList(1, 2, 3, 4, 5, 6); final Predicate&lt;Integer> predicate = i -> i % 2 == 0; final Predicate&lt;Integer> predicate1 = predicate.and(integer -> integer > 5); List&lt;Integer> result = list.stream() .filter(predicate1) .collect(Collectors.toList()); System.out.println(result); } } [6]</p></div><footer class=entry-footer><span title='Created: 2019-08-24 10:15:55 +0800 CST'>2019-08-24</span>&nbsp;Â·&nbsp;<span title='Modified: 2019-09-29 11:26:46 +0800 CST'> (ğŸŒŸUpdated: 2019-09-29)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>220 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to JAVA8é—®é¢˜å¤„ç†å›é¡¾-æŒç»­æ›´æ–°" href=http://blog.imcompany.cn/post/java8-issue-review/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ä»£ç†æ¨¡å¼</h2></header><div class=entry-content><p>è¯´æ˜ ä»£ç†æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­ä½¿ç”¨é¢‘ç‡éå¸¸çš„é«˜çš„æ¨¡å¼ï¼Œåƒæ—¥å¸¸ç”Ÿæ´»ä¸­çš„æˆ¿äº§ä¸­ä»‹ã€å¤–å–å¹³å°éƒ½å±äºä»£ç†ã€‚ä»£ç†æ¨¡å¼å°±æ˜¯åœ¨è®¿é—®çœŸæ­£çš„ä¸šåŠ¡ä¹‹æ—¶ä¸ä¼šç›´æ¥ä¸çœŸæ­£çš„ä¸šåŠ¡è¿›è¡Œè°ƒç”¨ï¼Œè€Œæ˜¯ä¸ä¸€ä¸ªä¸çœŸæ­£ä¸šåŠ¡å¯¹è±¡æœ‰ç€ç›¸åŒåŠŸèƒ½å£°æ˜çš„ä»£ç†æ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯æœ€ç»ˆçš„å¤„ç†è¿˜æ˜¯ç”±çœŸæ­£çš„ä¸šåŠ¡ç±»æ¥è¿›è¡Œï¼ˆå†³å®šï¼‰ï¼Œæ¯”å¦‚æˆ¿äº§ä¸­ä»‹ï¼Œä»–ä»¬ä¼šå¸®åŠ©æ‰¾æˆ¿è€…æ ¹æ®æ¡ä»¶æ¥å¯¹å¯é€‰æˆ¿å±‹è¿›è¡Œç­›é€‰ï¼Œä½†æ˜¯æœ€ç»ˆè®¢ä¸ä¸è®¢çš„æƒåˆ©è¿˜æ˜¯ç”±æ‰¾æˆ¿è€…æ¥å†³å®šã€‚å¸¸è§çš„ä»£ç†æœ‰ä¿æŠ¤ä»£ç†ã€è™šæ‹Ÿä»£ç†ã€è¿œç¨‹ä»£ç†ã€‚
ä»£ç†æ¨¡å¼ æˆ‘ä»¬å¸¸ç”¨çš„åå°ç³»ç»Ÿä¸€èˆ¬ä¼šæ ¹æ®ç”¨æˆ·æƒé™çš„ä¸åŒå¯¹ç”¨æˆ·å±•ç¤ºä¸åŒçš„ä¸šåŠ¡èœå•ï¼Œæ‹¥æœ‰é«˜æƒé™çš„äººä¼šå±•ç¤ºç›¸å¯¹å¤šçš„èœå•è¿›è¡Œæ“ä½œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜è¦è®°å½•ç”¨æˆ·çš„æ“ä½œæ—¥å¿—ï¼Œç”¨æˆ·ç‚¹äº†ä»€ä¹ˆï¼Œæ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œéƒ½éœ€è¦è¿›è¡Œè®°å½•ï¼Œè¾¾åˆ°æœ‰æ®å¯æŸ¥ã€‚åœ¨è¿™ä¸ªä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼è¿›è¡Œå®ç°ã€‚ä»£ç†å¯¹è±¡ä¼šæŒæœ‰ä¸€ä¸ªçœŸæ­£ä¸šåŠ¡å¯¹è±¡çš„å®ä¾‹ï¼Œåœ¨ä»£ç†å¯¹è±¡ä¸­è¿˜å¼•ç”¨æ—¥å¿—æœåŠ¡ä¸æƒé™æœåŠ¡ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ç»è¿‡è¿™ä¸ªä»£ç†ç±»æ¥è¿›è¡Œï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®æ“ä½œçš„ç”¨æˆ·çš„çŠ¶æ€æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†äº†ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š
å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ¥å£ï¼Œåœ¨è¿™é‡Œå®šä¹‰ä¸€ä¸ªæŸ¥è¯¢ç”¨æˆ·æ”¶å…¥çš„æ–¹æ³•ï¼Œå¦‚ä¸‹: package cn.imcompany.proxy; /** * Created by tomyli on 2018/6/28. * Github: https://github.com/peng051410 */ public interface Search { void queryIncome(String username); } å†å®šä¹‰ä¸€ä¸ªå®ç°è¯¥æ¥å£çš„å…·ä½“ä¸šåŠ¡ç±»ï¼š package cn.imcompany.proxy; /** * Created by tomyli on 2018/6/28. * Github: https://github.com/peng051410 */ public class SearchService implements Search { @Override public void queryIncome(String username) { System.out.println(username + "å¼€å§‹æŸ¥è¯¢"); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(username + "æŸ¥è¯¢å®Œæˆ"); } } åœ¨ä¸Šé¢ä»£ç ä¸­å°±å®ç°äº†æŸ¥è¯¢æ”¶å…¥çš„æ–¹æ³•ï¼Œç®€å•çš„æ‰“å°äº†ä¸¤è¡Œæ—¥å¿—ã€‚
...</p></div><footer class=entry-footer><span title='Created: 2018-07-16 21:08:28 +0800 CST'>2018-07-16</span>&nbsp;Â·&nbsp;<span title='Modified: 2019-06-26 10:47:52 +0800 CST'> (ğŸŒŸUpdated: 2019-06-26)</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>189 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ä»£ç†æ¨¡å¼" href=http://blog.imcompany.cn/post/she-ji-mo-shi-xue-xi-zhi-dai-li-mo-shi/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å§”æ‰˜æ¨¡å¼</h2></header><div class=entry-content><p>è¯´æ˜ å§”æ‰˜æ¨¡å¼ä¸å±äº23ç§è®¾è®¡æ¨¡å¼ä¸­ï¼Œä½†æ˜¯å®ƒåœ¨Springæ¡†æ¶ä¸­ä½¿ç”¨çš„å¾ˆé¢‘ç¹ï¼ŒSpringçš„ä½œç”¨åœ¨Javaçš„å¼€å‘æ˜¯éå¸¸å¤§ï¼Œæ‰€ä»¥éœ€è¦å­¦ä¹ ä¸€ä¸‹å§”æ‰˜æ¨¡å¼ã€‚å§”æ‰˜æ¨¡å¼æ˜¯æŒ‡ä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„æ–¹æ³•ä¸åŠŸèƒ½ï¼Œæ¯”å¦‚Aã€Bä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯æœ‰è°ƒç”¨Açš„methodæ–¹æ³•ï¼ŒAä¸ä¼šè‡ªå·±æ¥å¤„ç†è€Œæ˜¯ç›´æ¥è°ƒç”¨äº†Bçš„åŒåæ–¹æ³•ï¼Œç”±ä¸¤ä¸ªå¯¹è±¡å‚ä¸åŒä¸€ä¸ªè¯·æ±‚ï¼Œæ¥å—è¯·æ±‚çš„å¯¹è±¡å°†å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å¤„ç†ã€‚
å§”æ‰˜æ¨¡å¼ åœ¨ä¸€èˆ¬çš„å…¬å¸ä¸­ï¼Œéƒ½ä¼šåˆ†ä¸ºè€æ¿ã€é¡¹ç›®ç»ç†ã€å¼€å‘äººå‘˜ç»“æ„ï¼Œè€æ¿è´Ÿè´£åˆ¶å®šå†³ç­–ï¼Œåˆ†é…ç»™é¡¹ç›®ç»ç†åï¼Œä»–ä¸ä¼šè‡ªå·±æ¥å®Œæˆï¼Œè€Œæ˜¯æŠŠéœ€è¦çš„åŠŸèƒ½è¿›è¡Œåˆ†è§£ï¼Œäº¤ç»™æ“…é•¿çš„å¼€å‘äººå‘˜è¿›è¡Œå®ç°ã€‚è™½ç„¶é¡¹ç›®ç»ç†ä¹Ÿå¯ä»¥å®Œæˆï¼Œä½†æ˜¯æ˜¯ä»–æŠŠè¿™äº›äº‹æƒ…å§”æ‰˜ç»™äº†å¤šä¸ªå¼€å‘äººå‘˜æ¥åšï¼ŒåŠ å¿«äº†å®Œæˆä»»åŠ¡çš„é€Ÿåº¦ã€‚å°±ä»¥è¿™ä¸ªéœ€æ±‚æ¥è¯´ï¼Œä½¿ç”¨å§”æ‰˜æ¨¡å¼æ¥è¿›è¡Œå®ç°:
å®šä¹‰æŠ½è±¡çš„äººç±»æ¥å£ï¼š
package cn.imcompany.delegate; /** * Created by tomyli on 2018/6/27. * Github: https://github.com/peng051410 */ public interface Member { void showName(); void showSkill(); void doWork(); } ä¸Šé¢ä»£ç ä¸­å®šä¹‰äº†æŠ½è±¡çš„äººç±»æ¥å£ï¼Œæ˜¾ç¤ºè¿™ä¸ªäººçš„åå­—ï¼Œæ‹¥æœ‰çš„æŠ€èƒ½ï¼Œå·¥ä½œçš„çŠ¶æ€æƒ…å†µï¼Œæ¥ä¸‹æ¥å®ç°éœ€æ±‚ä¸­çš„æ¯ä¸ªäººã€‚
å®šä¹‰è€æ¿(BOSS):
package cn.imcompany.delegate; /** * Created by tomyli on 2018/6/27. * Github: https://github.com/peng051410 */ public class Boss implements Member { @Override public void showName() { System.out.println("i am boss"); } @Override public void showSkill() { System.out.println("send commend"); } @Override public void doWork() { } } å®šä¹‰é¡¹ç›®ç»ç†å’Œå‘˜å·¥:
...</p></div><footer class=entry-footer><span title='Created: 2018-07-07 18:53:57 +0800 CST'>2018-07-07</span>&nbsp;Â·&nbsp;<span title='Modified: 2019-06-26 11:01:09 +0800 CST'> (ğŸŒŸUpdated: 2019-06-26)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>282 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å§”æ‰˜æ¨¡å¼" href=http://blog.imcompany.cn/post/she-ji-mo-shi-xue-xi-zhi-wei-tuo-mo-shi/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è§‚å¯Ÿè€…</h2></header><div class=entry-content><p>è¯´æ˜ è§‚å¯Ÿè€…æ¨¡å¼åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œå®ƒå»ºç«‹äº†å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºæ”¹å˜ä¼šé€šçŸ¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¢«é€šçŸ¥çš„å¯¹è±¡æ ¹æ®é€šçŸ¥åšå‡ºç›¸åº”çš„å¤„ç†åŠ¨ä½œã€‚åœ¨è§‚å¯Ÿè€…ä¸­åˆ†ä¸ºç›®æ ‡å¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ã€è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºæ¨¡å¼ã€‚
è§‚å¯Ÿè€…æ¨¡å¼ ç°åœ¨å¾ˆå¤šäººéƒ½è´­ä¹°è‚¡ç¥¨ï¼Œåœ¨å¸‚é¢ä¸Šæœ‰å¾ˆå¤šçš„è‚¡ç¥¨è½¯ä»¶ä¾›å¹¿å¤§è‚¡æ°‘ä½¿ç”¨ã€‚è‚¡ç¥¨è½¯ä»¶ä¸€èˆ¬ä¼šåœ¨ç”¨æˆ·å…³æ³¨çš„è‚¡ç¥¨æœ‰å˜åŠ¨æ—¶å‘é€æ¶ˆæ¯æ¥é€šçŸ¥è‚¡æ°‘ã€‚åœ¨è¿™é‡Œï¼ŒæŸä¸€æ”¯è‚¡ç¥¨å°±æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œå¹¿å¤§è‚¡æ°‘ä¸è‚¡ç¥¨è½¯ä»¶å°±æ˜¯è§‚å¯Ÿè€…ï¼Œä»–ä»¬æ ¹æ®è‚¡ç¥¨çš„è¡Œæƒ…å˜åŒ–æ¥åšå‡ºç›¸åº”ä¹°å…¥æˆ–è€…å–å‡ºæ“ä½œã€‚è¿™ä¸€éœ€æ±‚å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œå®ç°ã€‚ä»£ç å¦‚ä¸‹ï¼š
å…ˆæ¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„è´­ä¹°è‚¡ç¥¨çš„è‚¡æ°‘ä»¬ï¼Œä»–ä»¬æœ‰å–œæœ‰æ‚²çš„å¿ƒæƒ…:
package cn.imcompany.observer.stock; /** * Created by tomyli on 2018/6/23. * Github: https://github.com/peng051410 */ public interface Buyer { void setName(String name); String getName(); void happy(); void sad(); } å†æ¥å®šä¹‰å…·ä½“çš„è‚¡æ°‘è¡Œä¸ºå®ç°ç±»ï¼š
package cn.imcompany.observer.stock; /** * Created by tomyli on 2018/6/23. * Github: https://github.com/peng051410 */ public class ConcrectBuyer implements Buyer { private String name; @Override public void setName(String name) { this.name = name; } @Override public String getName() { return name; } @Override public void happy() { System.out.println(this.getName() + ":happy"); } @Override public void sad() { System.out.println(this.getName() + ":sad"); } } å…·ä½“çš„è‚¡æ°‘å®ç°äº†å–œä¸æ‚²çš„æ–¹æ³•ï¼Œè¿™æ ·è§‚å¯Ÿè€…å·²ç»å‡†å¤‡å°±ç»ªã€‚ä¸‹é¢æ¥å®šä¹‰è‚¡ç¥¨è½¯ä»¶ï¼š
...</p></div><footer class=entry-footer><span title='Created: 2018-07-04 20:31:41 +0800 CST'>2018-07-04</span>&nbsp;Â·&nbsp;<span title='Modified: 2019-06-26 10:57:33 +0800 CST'> (ğŸŒŸUpdated: 2019-06-26)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>244 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è§‚å¯Ÿè€…" href=http://blog.imcompany.cn/post/she-ji-mo-shi-xue-xi-zhi-guan-cha-zhe/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è£…é¥°å™¨</h2></header><div class=entry-content><p>è¯´æ˜ è£…é¥°å™¨è®¾è®¡æ¨¡å¼æ˜¯ä½¿ç”¨æ¯”è¾ƒé¢‘ç¹çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒåœ¨ä¸æ”¹å˜åŸç‰©ä½“çš„æƒ…å†µå¯¹åŸç‰©ä½“å®ç°äº†åŠŸèƒ½çš„å¢åŠ ï¼ŒåŸç‰©ä½“è¿˜æ˜¯ä¸€ä¸ªå¯å•ç‹¬ä½¿ç”¨çš„ä¸ªä½“ã€‚åœ¨JAVAçš„ç±»åº“ä¸­åº”è¯¥ä¼šé©¬ä¸Šæƒ³åˆ°IOç±»ï¼Œå„ç§çš„InputStremï¼ŒOutputStremã€‚
è£…é¥°å™¨æ¨¡å¼ åœ¨ç”¨æˆ·ç™»å½•çš„ä¸­è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç”¨æˆ·è¾“å…¥çš„å¯†ç è¿›è¡ŒåŠ å¯†æ“ä½œï¼Œåœ¨è®¾è®¡æ—¶ä¼šæä¾›å¥½å¤šç§åŠ å¯†çš„ç®—æ³•ï¼Œä¾‹å¦‚ç®€å•çš„BASE64åŠ å¯†ï¼Œå¤æ‚çš„å¦‚MD5ã€DSAåŠ å¯†ã€‚ç›´æ¥æŠŠç”¨æˆ·çš„å¯†ç å­˜å…¥æ•°æ®åº“æ˜¯çœŸçš„åœ¨è€æµæ°“ã€‚åœ¨ä½¿ç”¨è¿™äº›ç®—æ³•æ—¶ï¼Œæˆ‘ä»¬æƒ³çµæ´»çš„ä½¿ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨å®Œç®€å•åŠ å¯†è¿˜å¯ä»¥å†è¿›è¡Œä¸€ä¸‹MD5çš„åŠ å¯†ã€‚é’ˆå¯¹è¿™æ ·çš„éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼è¿›è¡Œå®ç°ã€‚å¤§ä½“æ€è·¯å¦‚ä¸‹ï¼š
åŠ å¯†æ¥å£ï¼Œå®šä¹‰åŠ å¯†æ–¹æ³•ã€‚ åœ¨è£…é¥°å™¨ä¸­ï¼Œæœ€åŸå§‹çš„è¢«è£…é¥°è€…æ˜¯ç›®æ ‡å®ç°ï¼Œå®ƒä»¬ä¸€èˆ¬ä¼šå®ç°åŠ å¯†å®šä¹‰çš„å…·ä½“æ–¹æ³•ã€‚ è£…é¥°è€…ä¼šé’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œè£…é¥°ï¼Œæ‰€ä»¥å®ƒè¦åŒæ ·å®ç°åŠ å¯†æ¥å£çš„æ–¹æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªè£…é¥°å™¨ä¼šå®šä¹‰ä¸ºæŠ½è±¡çš„å½¢å¼ï¼Œåœ¨è¿™ä¸ªè£…é¥°å™¨çˆ¶ç±»ä¸­ç»´æŠ¤ç€å¯¹ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ã€‚ å…·ä½“è£…é¥°å™¨ç»§æ‰¿æŠ½è±¡è£…é¥°å™¨æ¥å®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„çœŸæ­£è£…é¥°æ“ä½œã€‚ ä»¥ä¸Šçš„æƒ…å†µåœ¨ä»£ç ä¸Šä½“ç°ä¸ºå¦‚ä¸‹å½¢å¼ï¼š
åŠ å¯†æ¥å£ package cn.imcompany.decorator.encrypt; /** * Created by tomyli on 2018/6/25. * Github: https://github.com/peng051410 */ public interface Encryptor { void encrypt(); } å…·ä½“åŠ å¯†ç±»ï¼Œå®ç°åŠ å¯†å¤„ç†æ¥å£ package cn.imcompany.decorator.encrypt; /** * Created by tomyli on 2018/6/25. * Github: https://github.com/peng051410 */ public class ConcreteEncryptor implements Encryptor { @Override public void encrypt() { System.out.println("base encrypt!"); } } æŠ½è±¡åŠ å¯†è£…é¥°å™¨ package cn.imcompany.decorator.encrypt; /** * Created by tomyli on 2018/6/25. * Github: https://github.com/peng051410 */ public abstract class EncryptDecorator implements Encryptor { private Encryptor encrypt; public EncryptDecorator(Encryptor encrypt) { this.encrypt = encrypt; } @Override public void encrypt() { encrypt.encrypt(); } } ä¸Šé¢çš„æŠ½è±¡è£…é¥°å™¨å®ç°çš„åŠ å¯†æ¥å£ï¼Œåœ¨è¿™ä¸ªç±»ä¸­ç»´æŠ¤åŠ å¯†æ¥å£çš„å®ä½“ï¼ŒåŠ å¯†æ–¹æ³•ç›´æ¥è°ƒç”¨å…¶ç»´æŠ¤å®ä½“çš„åŠ å¯†æ–¹æ³•ã€‚
...</p></div><footer class=entry-footer><span title='Created: 2018-07-02 20:09:14 +0800 CST'>2018-07-02</span>&nbsp;Â·&nbsp;<span title='Modified: 2019-06-26 11:05:45 +0800 CST'> (ğŸŒŸUpdated: 2019-06-26)</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>236 words</span>&nbsp;Â·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è£…é¥°å™¨" href=http://blog.imcompany.cn/post/she-ji-mo-shi-xue-xi-zhi-zhuang-shi-qi/></a></article><footer class=page-footer><nav class=pagination><a class=next href=http://blog.imcompany.cn/categories/java/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=http://blog.imcompany.cn/>I'm company</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>