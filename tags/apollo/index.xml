<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Apollo on I&#39;m company</title>
    <link>http://blog.imcompany.cn/tags/apollo/</link>
    <description>Recent content in Apollo on I&#39;m company</description>
    <image>
      <title>I&#39;m company</title>
      <url>http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.154.5</generator>
    <language>en</language>
    <lastBuildDate>Fri, 16 Sep 2022 16:18:37 +0800</lastBuildDate>
    <atom:link href="http://blog.imcompany.cn/tags/apollo/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Apollo不更新配置了？</title>
      <link>http://blog.imcompany.cn/post/apollo-work-issue/</link>
      <pubDate>Fri, 16 Sep 2022 15:22:00 +0800</pubDate>
      <guid>http://blog.imcompany.cn/post/apollo-work-issue/</guid>
      <description>&lt;h2 id=&#34;问题描述&#34;&gt;问题描述&lt;/h2&gt;
&lt;p&gt;近期改造服务调用，需要使用Apollo配置进行灵活切换，上线后发现有些机器配置生效，有些配置未生效，开发小伙伴反馈此问题发生有一段时间&lt;/p&gt;
&lt;h2 id=&#34;问题排查&#34;&gt;问题排查&lt;/h2&gt;
&lt;h3 id=&#34;机器排查&#34;&gt;机器排查&lt;/h3&gt;
&lt;p&gt;对线上机器进行排查，发现有几台机器根本没有拉取新的应用配置&lt;/p&gt;
&lt;h3 id=&#34;指定问题机器信息&#34;&gt;指定问题机器信息&lt;/h3&gt;
&lt;p&gt;进入到问题机器查看本地Apollo文件信息&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-rw-r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; mqq mqq  &lt;span class=&#34;m&#34;&gt;3429&lt;/span&gt; May &lt;span class=&#34;m&#34;&gt;19&lt;/span&gt; 15:32 main-webapp+default+CoopReader.baipai.switch.properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; mqq mqq  &lt;span class=&#34;m&#34;&gt;1621&lt;/span&gt; Jul  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; 15:39 main-webapp+default+CoopReader.switcher.properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; mqq mqq    &lt;span class=&#34;m&#34;&gt;89&lt;/span&gt; Aug &lt;span class=&#34;m&#34;&gt;26&lt;/span&gt; 11:18 main-webapp+default+CoopReader.personal.menu.properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; mqq mqq  &lt;span class=&#34;m&#34;&gt;3958&lt;/span&gt; Aug &lt;span class=&#34;m&#34;&gt;26&lt;/span&gt; 15:45 main-webapp+default+CoopReader.common.config.propertie
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;可以看到文件的最新日期在8月26日&lt;/p&gt;
&lt;h3 id=&#34;apollo-服务的问题&#34;&gt;Apollo 服务的问题?&lt;/h3&gt;
&lt;p&gt;先前小伙伴反应问过运维相关问题，得到的结论是Apollo没有改动，且服务配置不是完全不可用，此方向排除&lt;/p&gt;
&lt;h3 id=&#34;服务的问题&#34;&gt;服务的问题?&lt;/h3&gt;
&lt;p&gt;从目前得到的信息可以确认是某几台机器上的Apollo client没有去拉取最新的配置信息&lt;/p&gt;
&lt;h3 id=&#34;为什么没有拉取到最新配置&#34;&gt;为什么没有拉取到最新配置?&lt;/h3&gt;
&lt;p&gt;先来梳理一下Apollo的使用流程:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;业务对Apollo的访问都基于 &lt;strong&gt;L5&lt;/strong&gt; 的方式&lt;/li&gt;
&lt;li&gt;目前业务工程使用cloudlevel5.Protocol来获取L5的信息与Apollo Portal进行交互&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.yuewen&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;userbase-l5-system&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.3.Final&lt;span class=&#34;nt&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;为什么业务机没有与apollo-portal交互&#34;&gt;为什么业务机没有与Apollo portal交互?&lt;/h4&gt;
&lt;p&gt;怀疑与出问题的机器获取不到L5信息有关&lt;/p&gt;
&lt;h2 id=&#34;问题猜测验证&#34;&gt;问题猜测验证&lt;/h2&gt;
&lt;p&gt;大体知道问题出在哪了，下面就需要进行验证了。最简单的方式就是打印出Apollo的相关日志信息对猜测进行验证，但是目前业务的日志级别设置的 &lt;strong&gt;ERROR&lt;/strong&gt; ，啥也看不到&lt;/p&gt;
&lt;h3 id=&#34;修改业务日志级别&#34;&gt;修改业务日志级别?&lt;/h3&gt;
&lt;p&gt;现在需要打印aplllo相关的日志级别为 &lt;strong&gt;Info&lt;/strong&gt; ，需要修改Logback中配置如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;logger&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;com.ctrip.framework.apollo&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;level=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;info&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是还是需要发版本上线，未免太麻烦，有没有其它办法？&lt;/p&gt;
&lt;h3 id=&#34;arthas动态修改日志级别&#34;&gt;Arthas动态修改日志级别&lt;/h3&gt;
&lt;p&gt;现在已经有非常成熟的线上调试工具了，Arthas就能实现对Logback的动态日志修改，二话不说，直接机器上修改验证&lt;/p&gt;
&lt;h4 id=&#34;在问题机器上启动arthas&#34;&gt;在问题机器上启动arthas&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;java -jar arthas-boot.jar
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;选择要处理的应用(10384)进入到arthas&lt;/p&gt;</description>
    </item>
    <item>
      <title>Apollo Client自定义问题拾遗</title>
      <link>http://blog.imcompany.cn/post/apollo-client-custom/</link>
      <pubDate>Mon, 01 Jul 2019 07:04:09 +0800</pubDate>
      <guid>http://blog.imcompany.cn/post/apollo-client-custom/</guid>
      <description>&lt;p&gt;&lt;strong&gt;由于公司很多服务要接入Apollo配置中心，并且对于项目的接入有网络要求，根据&lt;a href=&#34;https://github.com/ctripcorp/apollo/wiki/Java%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597#1221-%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589apollo-meta-server%25E5%259C%25B0%25E5%259D%2580%25E5%25AE%259A%25E4%25BD%258D%25E9%2580%25BB%25E8%25BE%2591&#34;&gt;官方说明&lt;/a&gt;，需要自定义Client来完成&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;接入步骤&#34;&gt;接入步骤&lt;/h2&gt;
&lt;h3 id=&#34;新建maven项目&#34;&gt;新建maven项目&lt;/h3&gt;
&lt;p&gt;在Idea中新建maven项目，基于quickstart构建&lt;/p&gt;
&lt;h3 id=&#34;增加项目依赖&#34;&gt;增加项目依赖&lt;/h3&gt;
&lt;p&gt;官方说明的建议在新的client中依赖Apollo官方的client，再根据业务进行扩展，所以maven依赖apollo-client，公司项目的网络访问需要通过L5来进行，所以还要依赖L5的jar，目前这个jar包没有maven坐标，只能以lib方式引入&lt;/p&gt;
&lt;h3 id=&#34;自定义metaserver&#34;&gt;自定义MetaServer&lt;/h3&gt;
&lt;p&gt;关键的部分，自定义满足公司网络条件的MetaServer，Apollo官网说明是实现MetaServerProvider且Order值小的Providor被使用，按照说明进行实现&lt;/p&gt;
&lt;h3 id=&#34;maven打包client&#34;&gt;Maven打包Client&lt;/h3&gt;
&lt;p&gt;执行
&lt;strong&gt;mvn clean install&lt;/strong&gt;
进行打包，解压jar包发现就只有一个Providor的实现类，这样jar运行有问题。需要把新Client所有的依赖都打进jar包，在网上找了半天，需要在POM中增加maven的plugin的配置，如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-nxml&#34; data-lang=&#34;nxml&#34;&gt;&amp;lt;!-- 打包所有的maven依赖到jar包 --&amp;gt;
&amp;lt;plugin&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.2.1&amp;lt;/version&amp;gt;
    &amp;lt;executions&amp;gt;
        &amp;lt;execution&amp;gt;
            &amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt;
            &amp;lt;goals&amp;gt;
                &amp;lt;goal&amp;gt;shade&amp;lt;/goal&amp;gt;
            &amp;lt;/goals&amp;gt;
            &amp;lt;configuration&amp;gt;
                &amp;lt;artifactSet&amp;gt;
                    &amp;lt;excludes&amp;gt;
                        &amp;lt;exclude&amp;gt;junit:junit&amp;lt;/exclude&amp;gt;
                    &amp;lt;/excludes&amp;gt;
                &amp;lt;/artifactSet&amp;gt;
            &amp;lt;/configuration&amp;gt;
        &amp;lt;/execution&amp;gt;
    &amp;lt;/executions&amp;gt;
&amp;lt;/plugin&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-nxml&#34; data-lang=&#34;nxml&#34;&gt;&amp;lt;!-- 添加依赖的非maven jar包 --&amp;gt;
&amp;lt;plugin&amp;gt;
    &amp;lt;groupId&amp;gt;com.googlecode.addjars-maven-plugin&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;addjars-maven-plugin&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.0.5&amp;lt;/version&amp;gt;
    &amp;lt;executions&amp;gt;
        &amp;lt;execution&amp;gt;
            &amp;lt;goals&amp;gt;
                &amp;lt;goal&amp;gt;add-jars&amp;lt;/goal&amp;gt;
            &amp;lt;/goals&amp;gt;
            &amp;lt;configuration&amp;gt;
                &amp;lt;resources&amp;gt;
                    &amp;lt;resource&amp;gt;
                        &amp;lt;directory&amp;gt;${basedir}/lib&amp;lt;/directory&amp;gt;
                    &amp;lt;/resource&amp;gt;
                &amp;lt;/resources&amp;gt;
            &amp;lt;/configuration&amp;gt;
        &amp;lt;/execution&amp;gt;
    &amp;lt;/executions&amp;gt;
&amp;lt;/plugin&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;由于项目中使用了maven依赖与非maven依赖，所以上述的两个插件都要使用。增加了上面两个插件后再运行打包命令查看生成的jar就发现所有的依赖都在jar中了。&lt;/p&gt;
&lt;h3 id=&#34;项目中使用client&#34;&gt;项目中使用Client&lt;/h3&gt;
&lt;p&gt;选择一个项目在测试环境进行配置调试，自定义的Meta Server一直没有生效，所以查找&lt;a href=&#34;https://github.com/ctripcorp/apollo/issues/1472&#34;&gt;官方文档&lt;/a&gt;，由于自定义Providor是通过&lt;a href=&#34;https://blog.csdn.net/comkingfly/article/details/7645245?utm_source=tuicool&amp;amp;utm_medium=referral&#34;&gt;SPI&lt;/a&gt;方式实现的，所以正确的实现方式是新建resource文件夹，指定MetaServerProvider的真正实现类的带包名类才可以，哎，找了我好久。&lt;/p&gt;
&lt;h3 id=&#34;后续操作&#34;&gt;后续操作&lt;/h3&gt;
&lt;p&gt;后续会把client上传到内部maven仓库，完善配置API，使业务方可以零配置来使用配置中心。&lt;/p&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Maven的打包机制还是不清晰，处理打包问题费了很多时间，要好好重新学习一下&lt;/li&gt;
&lt;li&gt;Apollo的官方文档还需要再仔细阅读，有问题多查issue，因为可能有人已经遇到了&lt;/li&gt;
&lt;li&gt;多读读源码，真正的体会大牛的软件设计思想&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Apollo 配置中心畅游</title>
      <link>http://blog.imcompany.cn/post/apollo-config-swim/</link>
      <pubDate>Thu, 09 May 2019 17:34:09 +0800</pubDate>
      <guid>http://blog.imcompany.cn/post/apollo-config-swim/</guid>
      <description>&lt;h2 id=&#34;目前市面上的开源产品&#34;&gt;目前市面上的开源产品&lt;/h2&gt;
&lt;h3 id=&#34;disconf&#34;&gt;&lt;a href=&#34;https://github.com/knightliao/disconf&#34;&gt;Disconf&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2014年7月百度开源的配置管理中心，同样具备配置的管理能力，目前已经不维护了，最近的一次代码提交是两年前了。&lt;/p&gt;
&lt;h3 id=&#34;spring-cloud-config&#34;&gt;&lt;a href=&#34;https://github.com/spring-cloud/spring-cloud-config&#34;&gt;Spring Cloud Config&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2014年9月开源，Spring Cloud生态组件，与Spring Cloud体系无缝整合。&lt;/p&gt;
&lt;h3 id=&#34;apollo&#34;&gt;&lt;a href=&#34;https://github.com/ctripcorp/apollo&#34;&gt;Apollo&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2016年5月，携程框架部开源的配置管理中心，具备规范的权限、流程治理等特性。&lt;/p&gt;
&lt;h3 id=&#34;nacos&#34;&gt;&lt;a href=&#34;https://github.com/alibaba/nacos&#34;&gt;Nacos&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;2018年6月，阿里开源的配置中心，可以做DNS和RPC的服务发现。&lt;/p&gt;
&lt;h2 id=&#34;为什么选择apollo&#34;&gt;为什么选择Apollo&lt;/h2&gt;
&lt;h3 id=&#34;社区活跃&#34;&gt;社区活跃&lt;/h3&gt;
&lt;p&gt;刚刚发布了&lt;a href=&#34;https://github.com/ctripcorp/apollo/releases/tag/v1.4.0&#34;&gt;1.4.0&lt;/a&gt;版本，Issue处理速度快&lt;/p&gt;
&lt;h3 id=&#34;文档齐全&#34;&gt;文档齐全&lt;/h3&gt;
&lt;p&gt;体验，部署，设计文档都齐全&lt;/p&gt;
&lt;h3 id=&#34;重要的灰度发布&#34;&gt;重要的灰度发布&lt;/h3&gt;
&lt;p&gt;想发布一台机器试试水，可以！&lt;/p&gt;
&lt;h3 id=&#34;开源协议友好&#34;&gt;开源协议友好&lt;/h3&gt;
&lt;p&gt;Apache 2 license&lt;/p&gt;
&lt;h2 id=&#34;apollo都有哪些重要功能&#34;&gt;Apollo都有哪些重要功能&lt;/h2&gt;
&lt;p&gt;以下摘自&lt;a href=&#34;https://github.com/ctripcorp/apollo#features&#34;&gt;官网说明&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;统一管理不同环境-不同集群的配置&#34;&gt;统一管理不同环境、不同集群的配置&lt;/h3&gt;
&lt;h3 id=&#34;配置修改实时生效-热发布&#34;&gt;配置修改实时生效（热发布）&lt;/h3&gt;
&lt;h3 id=&#34;版本发布管理&#34;&gt;版本发布管理&lt;/h3&gt;
&lt;p&gt;目前只支持对最近版本的恢复。&lt;a href=&#34;https://github.com/ctripcorp/apollo/issues/1642&#34;&gt;https://github.com/ctripcorp/apollo/issues/1642&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;灰度发布&#34;&gt;灰度发布&lt;/h3&gt;
&lt;h3 id=&#34;权限管理-发布审核-操作审计&#34;&gt;权限管理、发布审核、操作审计&lt;/h3&gt;
&lt;p&gt;编辑与发布是两个独立的操作。&lt;/p&gt;
&lt;h3 id=&#34;客户端配置信息监控&#34;&gt;客户端配置信息监控&lt;/h3&gt;
&lt;h3 id=&#34;提供java和-dot-net原生客户端&#34;&gt;提供Java和.Net原生客户端&lt;/h3&gt;
&lt;h3 id=&#34;提供开放平台api&#34;&gt;提供开放平台API&lt;/h3&gt;
&lt;p&gt;这样可以通过其它方式来查看配置信息，&lt;a href=&#34;https://github.com/ctripcorp/apollo/wiki/Apollo%25E5%25BC%2580%25E6%2594%25BE%25E5%25B9%25B3%25E5%258F%25B0&#34;&gt;平台API说明&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;使用方便的后台配置系统portal&#34;&gt;使用方便的后台配置系统Portal&lt;/h3&gt;
&lt;h3 id=&#34;分布式部署相对较复杂-这是缺点&#34;&gt;分布式部署相对较复杂，这是缺点&lt;/h3&gt;
&lt;p&gt;外部依赖少，目前依赖Mysql&lt;/p&gt;
&lt;h2 id=&#34;apollo的组成&#34;&gt;Apollo的组成&lt;/h2&gt;
&lt;h3 id=&#34;apollo长什么样&#34;&gt;Apollo长什么样?&lt;/h3&gt;
&lt;figure&gt;
    &lt;img loading=&#34;lazy&#34; src=&#34;http://blog.imcompany.cn/ox-hugo/apollo-home-screenshot.png&#34;/&gt; 
&lt;/figure&gt;

&lt;h3 id=&#34;apollo整体设计&#34;&gt;Apollo整体设计&lt;/h3&gt;
&lt;h4 id=&#34;总体架构&#34;&gt;总体架构&lt;/h4&gt;
&lt;figure&gt;
    &lt;img loading=&#34;lazy&#34; src=&#34;http://blog.imcompany.cn/ox-hugo/apollo-overall-architecture.png&#34;/&gt; 
&lt;/figure&gt;

&lt;h4 id=&#34;代码结构&#34;&gt;代码结构&lt;/h4&gt;
&lt;figure&gt;
    &lt;img loading=&#34;lazy&#34; src=&#34;http://blog.imcompany.cn/ox-hugo/apollo-code-structure.png&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/ctripcorp/apollo/wiki/Apollo%25E9%2585%258D%25E7%25BD%25AE%25E4%25B8%25AD%25E5%25BF%2583%25E8%25AE%25BE%25E8%25AE%25A1#13-%25E5%2590%2584%25E6%25A8%25A1%25E5%259D%2597%25E6%25A6%2582%25E8%25A6%2581%25E4%25BB%258B%25E7%25BB%258D&#34;&gt;各模块概要介绍&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;apollo-config-service&#34;&gt;Apollo Config Service&lt;/h3&gt;
&lt;p&gt;提供配置获取接口，服务对象为Apollo客户端&lt;/p&gt;
&lt;h3 id=&#34;apollo-admin-service&#34;&gt;Apollo Admin Service&lt;/h3&gt;
&lt;p&gt;提供配置管理（修改、发布）接口，服务与Portal&lt;/p&gt;
&lt;h3 id=&#34;apollo-portal&#34;&gt;Apollo Portal&lt;/h3&gt;
&lt;p&gt;提供WEB界面供用户管理配置&lt;/p&gt;
&lt;h2 id=&#34;apollo的重要设计&#34;&gt;Apollo的重要设计&lt;/h2&gt;
&lt;h3 id=&#34;admin-service与config-service的通信方式&#34;&gt;Admin Service与Config Service的通信方式&lt;/h3&gt;
&lt;p&gt;Apollo使用Mysql实现消息(ReleaseMessage)的处理，消息内容为AppId+Cluster+Namespace，具体的设计思想可以参考&lt;a href=&#34;https://github.com/ctripcorp/apollo/wiki/Apollo%25E9%2585%258D%25E7%25BD%25AE%25E4%25B8%25AD%25E5%25BF%2583%25E8%25AE%25BE%25E8%25AE%25A1#211-%25E5%258F%2591%25E9%2580%2581releasemessage%25E7%259A%2584%25E5%25AE%259E%25E7%258E%25B0%25E6%2596%25B9%25E5%25BC%258F&#34;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
    &lt;img loading=&#34;lazy&#34; src=&#34;http://blog.imcompany.cn/ox-hugo/apollo-release-message-design.png&#34;/&gt; 
&lt;/figure&gt;

&lt;h3 id=&#34;客户端与服务端的通信方式&#34;&gt;客户端与服务端的通信方式&lt;/h3&gt;
&lt;p&gt;客户端与服务端保持一个长连接(通过Http Long Polling实现)
&lt;a href=&#34;~/github/apollo/doc/images/client-architecture.png&#34;&gt;Client Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;重要的namespace&#34;&gt;重要的Namespace&lt;/h3&gt;
&lt;p&gt;Namespace是配置项的集合，类似于一个配置文件的概念，获取的权限分为private与public两种权限。&lt;/p&gt;
&lt;h4 id=&#34;namespace的类型&#34;&gt;Namespace的类型&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;私有类型&lt;/li&gt;
&lt;li&gt;公有类型&lt;/li&gt;
&lt;li&gt;关联类型（继承类型）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cluster能用来做什么&#34;&gt;Cluster能用来做什么?&lt;/h3&gt;
&lt;p&gt;分机房实例，分任务功能实例，比如在一些实例执行job，需要增加-Dapollo.cluster=配置指定集群名&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
