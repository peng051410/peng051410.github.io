<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tags | I'm company</title><meta name=keywords content><meta name=description content="Everyone is a company."><meta name=author content="Me"><link rel=canonical href=http://blog.imcompany.cn/tags/tags/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://blog.imcompany.cn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=http://blog.imcompany.cn/tags/tags/index.xml title=rss><link rel=alternate hreflang=en href=http://blog.imcompany.cn/tags/tags/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="http://blog.imcompany.cn/tags/tags/"><meta property="og:site_name" content="I'm company"><meta property="og:title" content="Tags"><meta property="og:description" content="Everyone is a company."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://blog.imcompany.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Tags"><meta name=twitter:description content="Everyone is a company."></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=http://blog.imcompany.cn/ accesskey=h title="Home (Alt + H)"><img src=http://blog.imcompany.cn/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://blog.imcompany.cn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://blog.imcompany.cn/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://blog.imcompany.cn/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://github.com/peng051410/today_i_learn title=Til><span>Til</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=http://blog.imcompany.cn/>Home</a>&nbsp;»&nbsp;<a href=http://blog.imcompany.cn/tags/>Tags</a></div><h1>Tags
<a href=/tags/tags/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>MAC本地编译go源码记录</h2></header><div class=entry-content><p>说明 近期在学习GO语言，想深入研读一下GO的源码，第一步就要是可以在本地正常的编译源代码，此文对MAC上go源的安装进行记录
下载go源码 git clone https://github.com/golang/go 选择go版本分支 本次使用go 1.8版本分支来进行编译，切换分支
git checkout release-branch.go1.8 本地编译 查看本地的go版本 go version go version go1.20.5 darwin/amd64 设置编译源码的go版本 export GOROOT_BOOTSTRAP=$GOROOT 设置go mod模式为auto 因为在go1.16后，go默认在任何路径下都开启gomod模式，待编译的go源码不需要使用gomod模式，设置其它模式为自动
export GO111MODULE=auto 编译 cd go/src ./make.bash 输出结果如下 Installed Go for darwin/amd64 in /Users/tomyli/github/go Installed commands in /Users/tomyli/github/go/bin
测试验证 修改go1.8的fmt包，增加一行打印内容，打印出来 tomyli /Users/tomyli/github/go/src/fmt/print.go
func Println(a ...interface{}) (n int, err error) { println("tomyli") return Fprintln(os.Stdout, a...) } 重新编译 cd go/src ./make.bash 验证脚本 创建一个新编译的go的GOPATH mkdir /Users/tomyli/github/go/localhost 测试脚本保存到localhost文件夹 main.go内容如下
...</p></div><footer class=entry-footer><span title='Created: 2023-09-20 11:35:00 +0800 CST'>2023-09-20</span>&nbsp;·&nbsp;<span title='Modified: 2023-09-20 20:16:05 +0800 CST'> (Updated: 2023-09-20)</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>138 words</span>&nbsp;·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to MAC本地编译go源码记录" href=http://blog.imcompany.cn/post/go-compile-source-code/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>如何使用Java JDK17版本OpenJ9 JVM</h2></header><div class=entry-content><p>前言 心血来潮，看到JDK19都出来了，想着升级一下自己电脑上的JDK到JDK17 LTS版本+OpenJ9 JVM，在升级过程中遇到找不到安装资源的问题，记录一下解决过程
JDK17是Oracle的提供的长期支持版本，IBM J9是IBM优化的JVM版本，使用它可以节省JAVA服务使用的内存
使用adoptopenjdk/openjdk/安装 先前的adoptopenjdk11-openj9版本是从adoptOpenJdk源进行安装的，想着JDK17版本也从这个源进行安装，执行以下命令进行安装
brew install adoptopenjdk/openjdk/adoptopenjdk17-openj9 报错了，没有找到，为什么？明明JDK已经到19版本了，openjdk的17版本却没有更新?
AdoptOpenJdk不维护了 查了半天的google，又上 AdoptOpenJDK 的brew源上看，找到了问题所在 根据官方brew源仓库的说明， AdoptOpenJdk 在2021-08-01 后不再更新了，所有版本都迁移到了Eclipse 基金会维护的JAVA生态顶级项目 Eclipse Adoptium
Temurin中不包含OpenJ9 JVM Eclipse Adoptium维护的JDK版本，通过 temurin 命令进行安装
brew search temurin 没有看到带OpenJ9名称的版本，查询temurin官方博客中发现目前的 temurin 中暂时不包含OpenJ9版本，需要到 IBM 官网进行安装
使用IBM维护的JDK 最后从IBM的网站上找到了OpenJ9，IBM的JDK版本在brew中使用 semeru 命令
brew install semeru-jdk17-open 安装成功. 终于可以使用 J9版本的JDK17了
REF https://medium.com/@sdkman_/adoptopenjdk-is-dead-long-live-eclipse-adoptium-4f2677ca935a</p></div><footer class=entry-footer><span title='Created: 2022-12-14 16:23:00 +0800 CST'>2022-12-14</span>&nbsp;·&nbsp;<span title='Modified: 2022-12-14 18:55:58 +0800 CST'> (Updated: 2022-12-14)</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>49 words</span>&nbsp;·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to 如何使用Java JDK17版本OpenJ9 JVM" href=http://blog.imcompany.cn/post/how-to-use-jdk17-j9jvm/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Spring的RedisTemplate如何与Lettuce进行交互的</h2></header><div class=entry-content><p>问题 SpringWebFlux项目，使用的Redis客户端是Lettuce(基于异步)，在Spring中封装了两种操作Redis的模板 RedisTemplate 与 ReactiveRedisTemplate ，正常情况下，异步编程要使用 ReactiveRedisTemplate ，那么可以在项目中使用 RedisTemplate 进行redis的操作吗？为什么？
答案 可以使用 RedisTemplate 在异步代码中进行操作
@Autowried private StringRedisTemplate redisTemplate; String value = redisTemplate.opsForValue().get(key); 追根溯源 先来明确一下应用与Redis的交互流程
Redis交互流程 获取连接 执行命令 返回结果 源码追踪 String value = redisTemplate.opsForValue().get(key); 以下以redis的get命令为例进行解析，get方法是通过 RedisTemplate 的 ValueOperations 属性进行处理的，因为 ValueOperations 是一个接口，要从其实现类 DefaultValueOperations 的get方法进行解析，直接上图
Figure 1: 整体流程图
关键点解析 第1-5步只是为了获取Redis连接
getConnection是为了获取具体的底层redis命令，项目使用Lettuce且为String操作，此处获取的连接为 LettuceStringCommands
第6步是命令执行触发点
它调用了执行DefaultValueOperations.execute(ValueDeserializingRedisCallback)方法调用时方法参数ValueDeserializingRedisCallback的实现方法inRedis，由此转入到真正的命令执行阶段
第9步获取API
LettuceConnection获取的是通过调用StatefulConnection.async()方法获取的异步API
第12步进行返回处理
LettuceConnection的doInvoke方法进行了LettuceInvoker的返回处理，在里面看到的是调用了feture.get()方法使用等待的方式来实现了异步转同步的调用
获取连接阶段与执行命令阶段图示 更近一步，可以把 获取连接阶段 与 执行命令阶段 分开来，看图更加清晰
...</p></div><footer class=entry-footer><span title='Created: 2022-06-01 11:04:00 +0800 CST'>2022-06-01</span>&nbsp;·&nbsp;<span title='Modified: 2022-06-06 16:21:49 +0800 CST'> (Updated: 2022-06-06)</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>70 words</span>&nbsp;·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to Spring的RedisTemplate如何与Lettuce进行交互的" href=http://blog.imcompany.cn/post/spring-redisttemplate-lettuce/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springwebflux源码学习-服务启动流程</h2></header><div class=entry-content><p>学习目标 理解WebFlux核心组件HttpHandler、WebHandler的创建过程 理解DispatcherHandler如何映射请求url及参数的过程 理解Netty服务的主要启动节点 此次学习的Spring boot版本为2.6.6，对应的Spring webflux版本为5.3.18
入口 Springboot工程入口方法为 SpringApplication.run() ，从此方法开始进行分析。
public static void main(String[] args) { SpringApplication.run(Main.class, args); } 决定启动的web应用类型 整个服务的web应用类型是在构造 SpringApplication 类时进行确定的，具体代码如下：
this.webApplicationType = WebApplicationType.deduceFromClasspath(); 判断应用类型的逻辑 org.springframework.web.reactive.DispatcherHandler存在 org.springframework.web.servlet.DispatcherServlet不存在 org.glassfish.jersey.servlet.ServletContainer不存在 即确认webApplicationType为 Reactive
if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null) && !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) { return WebApplicationType.REACTIVE; } 创建具体的ApplicationContext 根据webApplicationType(Reactive)确定创建的ApplicationContext为AnnotationConfigReactiveWebServerApplicationContext，此Context支持 @Component 和 JSR-330规范中 @Inject 形式的依赖注解
SpringAplication.createApplicationContext() switch (webApplicationType) { case SERVLET: return new AnnotationConfigServletWebServerApplicationContext(); case REACTIVE: return new AnnotationConfigReactiveWebServerApplicationContext(); default: return new AnnotationConfigApplicationContext(); } 最主要的ApplicationContext.refresh()方法 refresh的Refresh阶段 刷新操作是在 AbstractApplicationContext 类的refresh方法中进行，在调用invokeBeanFactoryPostProcessors方法时会有对controller注解的扫描与处理
...</p></div><footer class=entry-footer><span title='Created: 2022-05-24 17:37:00 +0800 CST'>2022-05-24</span>&nbsp;·&nbsp;<span title='Modified: 2022-05-30 20:10:14 +0800 CST'> (Updated: 2022-05-30)</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>351 words</span>&nbsp;·&nbsp;<span>tomyli</span></footer><a class=entry-link aria-label="post link to Springwebflux源码学习-服务启动流程" href=http://blog.imcompany.cn/post/springwebflux-start/></a></article></main><footer class=footer><span>&copy; 2026 <a href=http://blog.imcompany.cn/>I'm company</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>